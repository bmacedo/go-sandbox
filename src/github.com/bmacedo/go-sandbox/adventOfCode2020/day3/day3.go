package main

import (
	"bufio"
	"fmt"
	"strings"
)

/**
https://adventofcode.com/2020/day/3
*/
func main() {
	matrix := readInput()
	count := treeCount(matrix, 1, 1)
	count2 := treeCount(matrix, 1, 3)
	count3 := treeCount(matrix, 1, 5)
	count4 := treeCount(matrix, 1, 7)
	count5 := treeCount(matrix, 2, 1)
	fmt.Println(count * count2 * count3 * count4 * count5)
}

func treeCount(matrix [][]byte, yStep int, xStep int) int {
	treeCount := 0
	posX := 0
	totalRows := len(matrix[0])
	for posY := yStep; posY < len(matrix); posY += yStep {
		posX += xStep
		if matrix[posY][posX%totalRows] == '#' {
			treeCount++
		}
	}
	return treeCount
}

func readInput() [][]byte {
	input := `
		...............#.#.............
		##..#....................#...##
		......#..#.#.....#..#.#.##.....
		.........#...#..............#.#
		............#.......##.........
		...#.....#.....#...#.....#..#..
		..............#..##.#..#......#
		.##.....#.....#......##.#......
		.#..........###....#...##....#.
		.....#....#.#.......#......##..
		.#....#......#.......#........#
		..#.#.......#..##.....##.......
		...#.#....#.......#.......#...#
		##.##...##..#......#.#.....#..#
		.#.#.......#..#.#......#...#.#.
		#.......##.......#...#.........
		.....#......#.#.#.....#....##..
		.#.#........#....#..#..#.......
		...#....#..###.........#.....#.
		........#........#........#....
		..##..............#.....#.#..#.
		.#...##.............#.#........
		....#..#...........#.......#...
		..#....#.....................#.
		#.#..................##......##
		.#.##....#......#........#.....
		.........##.....#....#...##..#.
		#..........#..#.#.............#
		.........#...#.#.#.#..##..##...
		#...#.....#..#..#....#...#.....
		..##.....#..................#..
		#..###.....#....#.......#..#...
		...##.##..#............#......#
		........###.........###......#.
		#..##....#.........#.........#.
		....#.....................#....
		#..#..##..#..####.##..#.....##.
		..#...#.#....#....##.....#.....
		...#.#.........#.....#.#.......
		....#................#..#...##.
		....#..#..........#...#.#.##...
		........#..##............#....#
		...#......##..........#.##...#.
		.......##......................
		.......##..........#....#.#...#
		......###.##..##..#....#...#..#
		#.#...........##.....#........#
		..#...........#..###....#.#.#..
		........#...........#......##..
		.........#...##.###...###..#...
		.....#.....#..##.........##....
		...##..............#.....#...##
		.##....#.......###.....#.......
		.#...........##.............##.
		......#..#..##.##......#......#
		........###........#......#.#..
		#.#....#.....#........#......#.
		.##..#.........##...##....#....
		.....#.........#...##.....#....
		.............#........###....#.
		......#.......#.#........#.#...
		..#....#.#...#....#...#.#...##.
		#...#......##..##......#.##.###
		...##.#....#...#....#.........#
		...#..####.....##.#..#.#...##..
		##.#..#....##......#......##...
		###.........#.#..#.#.....#.....
		...#........#..##...#.#.#..#.#.
		...###..#.###.#...#............
		....................###........
		...........#...........#.......
		#..............#.#.........###.
		....................##.....#..#
		#.#.....#.......#...#..........
		.#...#......#....##...#...#....
		.....#.##..................###.
		.........#.#..#.#......#.......
		.......#.....##..#.##.#........
		..#..........#.###.....#....#..
		......#.............#.#........
		........##....#........#.......
		...#.............#....#.#......
		#........#..####.....#.....#.#.
		.##......##...#........#..#.#..
		....##....#...#...#..##...#.#..
		#.##...###..#....##.#..........
		....#.#...#.#...#..##.###...#..
		#.....##..#..#....#.#.....##...
		.#..#..........##.#.....##.....
		.#..#........#.#.#.#...........
		.#..#.....#...........#...#....
		...#......##..........##..#....
		...#..#....#.##...#..#.....###.
		#.#....#.....##................
		#..#......#.#.#.......#........
		......#....#.#....#..##....#..#
		.#.....#.#....###.##.........#.
		.###..#.....#........#.#.......
		.#...#......#..#.#......#.....#
		#...............####...#.....#.
		.......#..........##.#........#
		#........##....##.....###..##..
		#..#.....#..##.....#....#..#...
		#.....#.......##......#.#.....#
		#.##..#......##..#.............
		##...#.....#........##.........
		....#..##....#...#.......#.#...
		....#...#...##..#....#..#...#..
		..............#.#...#....###...
		...#....#..##...##..#....##....
		#.##.#..#..#......#.#.#.#...#..
		.......#..#..##........#......#
		##.#....#....##.#......##.#....
		.#...#..............#........#.
		.#.#....#.........#............
		.#..#..###.............#....#..
		#......#...#.#..##..#...#....#.
		.......................#...#.#.
		.............#..#...##.........
		..#.#..#....#....#........#....
		#......#.##..#...#.#...........
		.....#....#...........##.#..#..
		..#.#.....#..............#.#...
		#.......#.....#................
		#..............#...#....#...#..
		...#...##..#..#............#...
		......###.....................#
		.........#.......##..#....#....
		........#...#.##..#.##......#..
		....###..#.#...#...#..#.#...###
		##...#...##.#...#.#...#.#....#.
		.........#...#.....###.........
		...#........##..#.......##.....
		.#.......##.........#.....##..#
		.#..................#...#......
		.##..#..#.#.....#.###..........
		...#.....##..#.........#...#...
		.#......#.#.......#.#..........
		.........#.#...#..........#.#..
		#..........#.##..#.##....#.....
		.#.#....#.....#..##.....#...#..
		..#........##...##..#..#....#..
		#...........##....#..###....#..
		...........##.........####...#.
		..#........###...#.#.........#.
		.#...............#.##.#.#...#..
		.#.##..#.....#.#.....##..#.....
		...#...#..#.##.##...#.......##.
		..#...#...#......##.##.##...#..
		##....#...#...#...............#
		...##...........#......#..#.#..
		#.........#......#.#.##.....#..
		........#..#.........##........
		..#.#....###.....##..#...#.....
		.........#...#.......#.....##..
		##.....................#...##..
		.#.#..#......#.................
		.....###..#......#..###..#.....
		...#.....##.........#......#..#
		......##.....#...#........#.#..
		..#.#...#......#...#.##.##.....
		...#..........#...#.......#..##
		.###........#........##........
		..#.#.#..........#.#...##......
		.........#........#......###..#
		....##..#.........#...........#
		..####..#............##.......#
		.....##.#..##.........#...#.#..
		...#.........#.....#.....#.....
		.......#...#..#...##.........#.
		...#...#..#...#....#..#........
		#............##.##...#.........
		.#.#.....#.......####.....#....
		..............#......#.#.......
		..............#...........#...#
		#...#........###....#.#....#.#.
		##.#..#..#......#......#.#.#...
		.#..#.....#..#.#..#.#.......##.
		......##.#...#...#......#...#..
		#...........##....#.#..........
		....#.......###.#...#..........
		.......................#.....#.
		........#...#..#...#.#.#.#.#...
		.#.#...........#......##...#...
		.........................#.....
		.................#.##.#...##...
		...#...##.....#.....##....#.#..
		...#...#...................#...
		...#..#..#...#...#....#........
		#....#...#.....#...............
		.......#...........#...#.......
		....#....#.....##.......#......
		.......#..........##...........
		.#.#........#..##....#......#..
		.....#.......#.#.........#...#.
		.#..####.#.#...............#..#
		.....###..#..#..........#.#..##
		..#.......#...#.....##..#..#.#.
		#....#......#..................
		........#.##.#....#...........#
		....#.#....##..#.#.....##......
		...#..#.......#....#.....#.#.#.
		#...#......#.....#.#..........#
		....#....#...............#.....
		..###......................###.
		.##....#..#.......###.....#..#.
		..###............#........#.##.
		.#........#......#.....#..#....
		....#..##...#...#.###.......#.#
		.......#.##...........#.#..#...
		.....#...##....................
		....#....#...##......#.........
		..#............##....###.#...#.
		.#........#...............#....
		#..#.#.##.........#..##....##..
		#.#....#..#.##....##...#.#.....
		.....#.....##....#.#........#..
		#..#...#...#....#....#.........
		...#........#..#.#.....##......
		..#...#...#................##..
		#........#.#.##.......#.#...#..
		#......#..####.##.....#.#..#.#.
		............#..#.#....#......##
		..#.....##....#...#.#..........
		...#...#.........#...#.#.......
		.###..#.......##.##.....#.#.#..
		...#....#...............##.#...
		....##..#..#..#.#......##.....#
		#.#..............##...##...####
		.....#.##...#.#...............#
		.##.....#.........#.......#.#.#
		#.#..#.....#.......#.......#..#
		...#.#.....#.....#......#......
		.......#....#..#.#..........#..
		......#......#.##...#..........
		.....#.......###...#...#.#.....
		#..#.#.........#.....#.##....#.
		..#.#.........#..#..#..#.....#.
		.#..##..#..#....#......#.##..#.
		...##......###.....#.##.##.....
		.#.....#...#..#...#............
		##..##..#.##....#..#...........
		...#..##..#..#.............#.##
		...............##............#.
		..#.....##........##.#...#....#
		.#.#...#.#.#..#.#.....#....#...
		.#....#...............#..#.....
		....#.##..#....#......#...###..
		#................###...#.#.....
		...#...#......##..#.#....#.....
		.#....#....#.#...##............
		....#...##..#..#........#.##...
		..##.....#..#..##..............
		..#..##..#.#..##....#....#....#
		...##.............#............
		#....#....#.#........#.....##.#
		.....#..#.#.....####...###.....
		................#......#.......
		.....#.#.#.#.#....#..#........#
		.##.#...#.#.......##....#....#.
		.....#........#................
		..#.....#..#...#..#...........#
		.#.....#...##.....##..#.#....##
		......#.......#..#......##.#...
		#.#..........#.##.#........#...
		...#..#.............#..........
		#..#..#..........#..##.#.......
		.#..#...............####..#....
		.......#.....#......#.....#.#..
		.#...............#...#.........
		.#..#..........#..#.#..##..#..#
		......##..#.....#..#......###..
		..........#...#..#.......#.....
		.#.#.#..#.....#.##.#...#..#....
		........#.......#.....#.#......
		......#.....##.....#....##.#...
		...............#......#.......#
		..#.#...#.....#.#...##......#..
		#.#.........#.#...#........####
		#..........##..#..#........##..
		.............#..#.......##.#..#
		..#........#.#....#........#.#.
		.#......####..#..#.............
		............###.......#.#..#...
		#.##......##...#...#.........#.
		....##.#.#.#......#....#..#...#
		.#..#.#....#...#.........#.....
		#...#.....##............#...#..
		#.#...#..#.................#...
		............#.#..#.....#.#.#..#
		...................#....#.##...
		.....#...#.#....#....#.#......#
		.......##.#.#......##..........
		.#..#...##.#...#..#......#.....
		......#.#..#..###..##..##......
		.#.#.#.#.....#...###.....#..#..
		.#....#.....#.......#.......#..
		..........##.........####......
		.#.#.............#..#.#...#....
		........#........##...#.#....#.
		........#......................
		..#.#....#...............#...##
		.......#.#...#..#.....##......#
		.#...#....#..........##........
		.#.........#.#............##...
		.....#......##...#.......#..#..
		#.#..#.............#...#...#...
		......#.......#............#...
		...........##....#......##.....
		.#.#..#.....................#..
		##..##.....###..##.#...........
		...##......##....#...##.....#..
		#...#.##.............#.........
		......#..#.........###.#......#
		#.#.....#.....................#
		....#####.....##........#.#..#.
		...........##..##.###..........
		..........##.....#........#...#
		.......#..#......#.....##..##.#
		.....##.#........#.........#...
		......##......................#
		.#.......#.#.#............#..#.
		.....##.#.......#.#........#...
	`

	//input := `
	//	..##.......
	//	#...#...#..
	//	.#....#..#.
	//	..#.#...#.#
	//	.#...##..#.
	//	..#.##.....
	//	.#.#.#....#
	//	.#........#
	//	#.##...#...
	//	#...##....#
	//	.#..#...#.#
	//	`

	//input := `
	//	..##
	//	#...
	//	.#..
	//	..#.
	//	`

	return splitLines(input)
}

func splitLines(s string) [][]byte {
	scanner := bufio.NewScanner(strings.NewReader(s))
	scanner.Split(bufio.ScanLines)

	var bytes [][]byte
	for scanner.Scan() {
		s := strings.TrimSpace(scanner.Text())
		if len(s) > 0 {
			b := []byte(s)
			bytes = append(bytes, b)
		}
	}
	return bytes
}
